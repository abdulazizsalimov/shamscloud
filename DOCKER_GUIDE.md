# üê≥ ShamsCloud Docker –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–ë—ã—Å—Ç—Ä–∞—è –∏ –ø—Ä–æ—Å—Ç–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ ShamsCloud —á–µ—Ä–µ–∑ Docker - –≤—Å—ë –≤ –æ–¥–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ!

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (5 –º–∏–Ω—É—Ç)

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Docker 20.10+
- Docker Compose 2.0+
- 2GB —Å–≤–æ–±–æ–¥–Ω–æ–π –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏
- 5GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ –æ–¥–Ω—É –∫–æ–º–∞–Ω–¥—É

1. **–°–∫–∞—á–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç:**
   ```bash
   git clone https://github.com/abdulazizsalimov/shamscloud.git
   cd shamscloud
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É:**
   ```bash
   ./docker-start.sh
   ```

3. **–ì–æ—Ç–æ–≤–æ!** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:5000`

## üìã –ß—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ

‚úÖ **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ShamsCloud** - –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –æ–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ  
‚úÖ **PostgreSQL 16** - –ù–∞–¥–µ–∂–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö  
‚úÖ **Nginx** - –í–µ–±-—Å–µ—Ä–≤–µ—Ä –∏ reverse proxy (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞** - –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ö–µ–º—ã –ë–î –∏ –∞–¥–º–∏–Ω–∞  
‚úÖ **Persistent –¥–∞–Ω–Ω—ã–µ** - –§–∞–π–ª—ã –∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏  

## üë§ –¢–µ—Å—Ç–æ–≤—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≥–æ—Ç–æ–≤—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã:

- **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä**: `admin@shamscloud.com` / `admin123`
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**: `demo@shamscloud.com` / `demo123`

## üõ† –í–∞—Ä–∏–∞–Ω—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ–ª–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (—Å Nginx)
```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –≤–∫–ª—é—á–∞—è Nginx
docker-compose up -d

# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞:
# http://localhost      (—á–µ—Ä–µ–∑ Nginx)
# http://localhost:5000 (–ø—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ)
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä–æ—Å—Ç–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (—Ç–æ–ª—å–∫–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ + –ë–î)
```bash
# –ó–∞–ø—É—Å–∫ –±–µ–∑ Nginx
docker-compose -f docker-compose.simple.yml up -d

# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞:
# http://localhost:5000
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –¢–æ–ª—å–∫–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–≤–Ω–µ—à–Ω—è—è –ë–î)
```bash
# –ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å PostgreSQL
docker build -t shamscloud .
docker run -d \
  -p 5000:5000 \
  -e DATABASE_URL="postgresql://user:pass@host:5432/db" \
  -v $(pwd)/uploads:/app/uploads \
  shamscloud
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `.env`:

```env
# –ü–∞—Ä–æ–ª—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–∏–∑–º–µ–Ω–∏—Ç–µ –¥–ª—è production!)
POSTGRES_PASSWORD=–≤–∞—à_–±–µ–∑–æ–ø–∞—Å–Ω—ã–π_–ø–∞—Ä–æ–ª—å

# Firebase –¥–ª—è Google OAuth (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
VITE_FIREBASE_API_KEY=–≤–∞—à_–∫–ª—é—á
VITE_FIREBASE_PROJECT_ID=–≤–∞—à_–ø—Ä–æ–µ–∫—Ç
VITE_FIREBASE_APP_ID=–≤–∞—à_app_id
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Firebase (–¥–ª—è Google –≤—Ö–æ–¥–∞)

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [Firebase Console](https://console.firebase.google.com/)
2. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
3. –í–∫–ª—é—á–∏—Ç–µ Authentication ‚Üí Google –ø—Ä–æ–≤–∞–π–¥–µ—Ä
4. –î–æ–±–∞–≤—å—Ç–µ –¥–æ–º–µ–Ω –≤ Authorized domains
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á–∏ –≤ —Ñ–∞–π–ª `.env`
6. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:
   ```bash
   docker-compose restart shamscloud
   ```

## üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose up -d

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f shamscloud

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose stop

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker-compose restart shamscloud

# –ü–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ (–≤–∫–ª—é—á–∞—è –¥–∞–Ω–Ω—ã–µ!)
docker-compose down -v
```

### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ë—ç–∫–∞–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
docker-compose exec postgres pg_dump -U shamscloud shamscloud > backup.sql

# –ë—ç–∫–∞–ø —Ñ–∞–π–ª–æ–≤
docker run --rm -v shamscloud_uploads_data:/data -v $(pwd):/backup alpine tar czf /backup/uploads-backup.tar.gz /data

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ë–î
docker-compose exec -T postgres psql -U shamscloud shamscloud < backup.sql
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
# –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
git pull origin main

# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
docker-compose build --no-cache shamscloud

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
docker-compose up -d
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è

```bash
# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
curl http://localhost:5000/api/auth/me
```

### –õ–æ–≥–∏

```bash
# –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
docker-compose logs -f shamscloud

# –õ–æ–≥–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
docker-compose logs -f postgres

# –õ–æ–≥–∏ Nginx (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
docker-compose logs -f nginx
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–ª—è Production

### 1. –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π

```bash
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª–∏ –≤ .env:
POSTGRES_PASSWORD=–æ—á–µ–Ω—å_—Å–ª–æ–∂–Ω—ã–π_–ø–∞—Ä–æ–ª—å_2024
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL (—Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º –¥–æ–º–µ–Ω–æ–º)

```bash
# –î–æ–±–∞–≤—å—Ç–µ –≤ docker-compose.yml –¥–ª—è certbot:
services:
  certbot:
    image: certbot/certbot
    volumes:
      - ssl_certs:/etc/letsencrypt
    command: certonly --webroot -w /var/www/certbot -d yourdomain.com
```

### 3. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞

```bash
# –ó–∞–∫—Ä–æ–π—Ç–µ –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ –ë–î
# –í docker-compose.yml —É–±–µ—Ä–∏—Ç–µ:
# ports:
#   - "5432:5432"
```

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker-compose logs shamscloud

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å –ø–µ—Ä–µ—Å–±–æ—Ä–∫–æ–π
docker-compose down
docker-compose build --no-cache
docker-compose up -d
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å PostgreSQL
docker-compose exec postgres pg_isready -U shamscloud

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –ë–î
docker-compose down -v
docker-compose up -d
```

### –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞

```bash
# –û—á–∏—Å—Ç–∫–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –æ–±—Ä–∞–∑–æ–≤
docker system prune -a

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–µ—Å—Ç–∞
docker system df
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ—Ä—Ç–∞–º–∏

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–Ω—è—Ç—ã–µ –ø–æ—Ä—Ç—ã
netstat -tulpn | grep :5000

# –ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç –≤ docker-compose.yml:
ports:
  - "8080:5000"  # –í–º–µ—Å—Ç–æ 5000
```

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –î–ª—è –≤—ã—Å–æ–∫–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫

```yaml
# –í docker-compose.yml –¥–æ–±–∞–≤—å—Ç–µ:
services:
  shamscloud:
    deploy:
      resources:
        limits:
          memory: 1G
          cpus: '1.0'
        reservations:
          memory: 512M
          cpus: '0.5'
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL

```yaml
# –î–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö:
services:
  postgres:
    command: >
      postgres 
      -c shared_buffers=256MB
      -c effective_cache_size=1GB
      -c maintenance_work_mem=64MB
```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ –º–∏–≥—Ä–∞—Ü–∏–∏

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç update.sh:
#!/bin/bash
git pull origin main
docker-compose build --no-cache shamscloud
docker-compose up -d
docker-compose exec shamscloud npm run db:push
```

### –í–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç—å

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ tagged –æ–±—Ä–∞–∑–∞
docker build -t shamscloud:v1.3.0 .
docker tag shamscloud:v1.3.0 shamscloud:latest
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

**–ü—Ä–æ–±–ª–µ–º—ã —Å —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π?**

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ [Issues –Ω–∞ GitHub](https://github.com/abdulazizsalimov/shamscloud/issues)
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —É Docker –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–µ—Å—É—Ä—Å–æ–≤ (2GB RAM –º–∏–Ω–∏–º—É–º)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker-compose logs -f`
4. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Issue —Å –ª–æ–≥–∞–º–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–∏—Å—Ç–µ–º–µ:**
- Docker 20.10+ –∏ Docker Compose 2.0+
- 2GB RAM (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 4GB)
- 5GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 20GB)
- –û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã 5000, 80, 443 (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

---

üéâ **–ì–æ—Ç–æ–≤–æ!** ShamsCloud —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö. –ù–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å –±–µ–∑–æ–ø–∞—Å–Ω—ã–º –æ–±–ª–∞—á–Ω—ã–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º!