# üê≥ Docker Guide –¥–ª—è ShamsCloud - –ü–û–õ–ù–ê–Ø –ö–û–ü–ò–Ø –ü–†–û–ï–ö–¢–ê

–≠—Ç–æ—Ç –≥–∞–π–¥ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –∑–∞–ø—É—Å—Ç–∏—Ç—å **—Ç–æ—á–Ω—É—é –∫–æ–ø–∏—é** —Ç–µ–∫—É—â–µ–≥–æ ShamsCloud –ø—Ä–æ–µ–∫—Ç–∞ –≤ Docker.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ (–æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞!)

```bash
# –ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–π –∫–æ–ø–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
./docker-start.sh
```

**–ì–æ—Ç–æ–≤–æ!** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ http://localhost:5000

## üìã –ß—Ç–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

‚úÖ **PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ö–µ–º–æ–π  
‚úÖ **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:**
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä: `admin@shamscloud.uz` / `ShamsAdmin2024!`
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: `demo@shamscloud.uz` / `ShamsDemo2024!`

‚úÖ **–î–µ–º–æ –ø–∞–ø–∫–∏** Documents –∏ Photos  
‚úÖ **Firebase –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** (—Ç–æ—á–Ω–æ –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞)  
‚úÖ **–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏:** –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤, –ø–æ–¥–µ–ª–µ–Ω–∏–µ, –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å  

## üîß –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

```bash
# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
docker-compose up --build -d

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
docker-compose ps

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f
```

## üéØ –ß—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **PostgreSQL 16** —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å—Ö–µ–º–æ–π
- **Persistent storage** - –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏
- **Health checks** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- **–¢–æ—á–Ω–∞—è –∫–æ–ø–∏—è** —Ç–µ–∫—É—â–µ–≥–æ –∫–æ–¥–∞
- **Production —Å–±–æ—Ä–∫–∞** —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –¥–∞–Ω–Ω—ã—Ö
- **Persistent uploads** - —Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

### Firebase
- **–ì–æ—Ç–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
- **Google OAuth** —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ä–∞–∑—É (–Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–º–µ–Ω –≤ Firebase Console)

## üìä –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker-compose restart

# –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (–í–ù–ò–ú–ê–ù–ò–ï: —É–¥–∞–ª—è–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ!)
docker-compose down -v
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
```bash
# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã
curl http://localhost:5000/api/auth/me
```

## üåê Production —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –° Nginx (–¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞)
```bash
# –ó–∞–ø—É—Å–∫ —Å –ø—Ä–æ–∫—Å–∏
docker-compose --profile production up -d --build
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞
1. –ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç—ã –≤ `docker-compose.yml` 
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Nginx –¥–ª—è –≤–∞—à–µ–≥–æ –¥–æ–º–µ–Ω–∞
3. –î–æ–±–∞–≤—å—Ç–µ –¥–æ–º–µ–Ω –≤ Firebase Console

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –í–∞–∂–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–ª—è production:
```bash
# 1. –ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª–∏ –≤ docker-compose.yml
POSTGRES_PASSWORD: your_secure_password

# 2. –ò–∑–º–µ–Ω–∏—Ç–µ SESSION_SECRET
SESSION_SECRET: your_super_secret_key

# 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ firewall
ufw allow 5000/tcp
```

## üíæ Backup –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ backup
docker-compose exec postgres pg_dump -U shamscloud shamscloud > backup.sql

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
cat backup.sql | docker-compose exec -T postgres psql -U shamscloud shamscloud
```

### –§–∞–π–ª—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```bash
# Backup —Ñ–∞–π–ª–æ–≤
docker run --rm -v shamscloud_uploads:/data -v $(pwd):/backup alpine tar czf /backup/files-backup.tar.gz -C /data .

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
docker run --rm -v shamscloud_uploads:/data -v $(pwd):/backup alpine tar xzf /backup/files-backup.tar.gz -C /data
```

## üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker-compose logs shamscloud

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑
docker-compose build --no-cache shamscloud
docker-compose up -d
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
docker-compose exec postgres pg_isready -U shamscloud

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–∞–∑—É
docker-compose restart postgres
```

### –û—á–∏—Å—Ç–∫–∞ Docker
```bash
# –£–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –æ–±—Ä–∞–∑—ã
docker image prune

# –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
docker system prune -a
```

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å **–ø–æ–ª–Ω–∞—è —Ä–∞–±–æ—á–∞—è –∫–æ–ø–∏—è ShamsCloud** –≤ Docker —Å:
- ‚úÖ –ì–æ—Ç–æ–≤–æ–π –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏  
- ‚úÖ –í—Å–µ–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ —Ñ–∞–π–ª–æ–≤–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
- ‚úÖ Firebase –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π
- ‚úÖ –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å—é

**–ó–∞–ø—É—Å–∫: `./docker-start.sh` –∏ –æ—Ç–∫—Ä—ã–≤–∞–π—Ç–µ http://localhost:5000**